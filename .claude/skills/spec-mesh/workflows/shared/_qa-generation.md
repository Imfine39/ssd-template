# QA ドキュメント生成

Pre-Input を分析し、ユーザー向け QA ドキュメントを生成する共通コンポーネント。

## 設計思想

実際の SIer のワークフローを模倣：
1. **ドキュメント交換**: Pre-Input → QA ドキュメント → ユーザー回答
2. **MTG（対話）**: 未回答・不明項目のみ AskUserQuestion で確認

## 使用タイミング

| ワークフロー | トリガー | 出力先 |
|--------------|----------|--------|
| project-setup | Input 読み込み後 | `.specify/qa/project-setup-qa.md` |
| add | Input 読み込み後 | `.specify/qa/{feature-id}-qa.md` |
| fix | Input 読み込み後 | `.specify/qa/{fix-id}-qa.md` |

## QA ドキュメント構造

### 質問カテゴリ

| マーカー | 意味 | 必須度 | 例 |
|----------|------|--------|-----|
| `[必須]` | 必ず回答が必要 | 高 | 「対象ユーザーは誰ですか？」 |
| `[確認]` | AI の推測を確認 | 中 | 「〇〇と理解しましたが正しいですか？」 |
| `[提案]` | AI からの提案 | 低 | 「〇〇機能も必要では？」 |
| `[選択]` | 複数選択肢から選択 | 中 | 「認証方式は A/B/C どれですか？」 |

### セクション構成

```markdown
# {プロジェクト名/機能名} QA ドキュメント

**生成日:** {日付}
**ステータス:** 回答待ち / 回答済み / 確認完了

---

## 1. 基本情報 [必須]

### Q1.1: {質問} [必須]
回答:

### Q1.2: {質問} [確認]
AI の理解: {推測内容}
正しいですか？: [ ] はい / [ ] いいえ（→ 正しくは: ）

---

## 2. 機能要件

### Q2.1: {質問} [必須]
回答:

### Q2.2: {質問} [選択]
選択肢:
- [ ] A: {説明}
- [ ] B: {説明}
- [ ] C: {説明}

---

## 3. 非機能要件

### Q3.1: セキュリティ要件 [確認]
AI の推測: {推測}
追加要件:

### Q3.2: パフォーマンス要件 [確認]
AI の推測: 特になし
追加要件:

---

## 4. AI SIer からの提案

### P4.1: {提案タイトル} [提案]
**所見:** {理由}
**提案:** {内容}
採否: [ ] 採用 / [ ] 不採用 / [ ] 要検討

---

## 5. 確認事項

### C5.1: {確認タイトル} [確認]
{確認内容}
回答:
```

## 生成ロジック

### Step 1: Input 分析

```
1. Input ファイルを読み込み
2. 記入済み項目を抽出
3. 未記入・不明瞭な項目を特定
4. 推測可能な項目を AI が補完
```

### Step 2: 質問生成

```
未記入項目 → [必須] 質問
推測項目 → [確認] 質問
選択が必要な項目 → [選択] 質問
```

### Step 3: 提案生成

```
_professional-proposals.md を参照
10 観点から提案を生成:
- 機能追加/削除
- データ追加/削除
- ビジネスロジック
- UX 改善
- セキュリティ
- パフォーマンス
- 保守性
- スケーラビリティ
```

### Step 4: QA ドキュメント出力

```
テンプレートに基づいて .specify/qa/ に出力
ユーザーに回答を依頼
```

## 終了条件

以下を満たすと QA 完了：

1. 全ての `[必須]` 項目に回答あり
2. `[確認]` 項目の承認/却下が完了
3. `[提案]` 項目の採否が決定
4. Critical な曖昧点がない

## 次のステップ

QA 完了後 → `_qa-analysis.md` で回答を分析 → Spec 作成へ
