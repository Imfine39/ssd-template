# AI SIer システム FAQ

**作成日:** 2026-01-01
**目的:** 設計の疑問点を整理し、運用時の判断基準を明確化

---

## 1. QA ドキュメント方式について

### Q1.1: なぜ対話ではなくドキュメント方式なのか？

**A:** 実際の SIer の仕事の流れに近づけるため。

| 方式 | メリット | デメリット |
|------|---------|-----------|
| 全て対話 | リアルタイム | 長い、疲れる、中断しにくい |
| 全てドキュメント | 自分のペースで回答 | 曖昧な回答への対応が難しい |
| **2段階（新方式）** | 効率的 + 柔軟 | - |

---

### Q1.2: QA ドキュメントはいつ生成される？

**A:** Pre-Input 分析後。

```
Pre-Input 記入 → AI が分析 → QA ドキュメント生成
```

---

### Q1.3: ユーザーが QA に全部回答しなかったら？

**A:** 未回答・不明の項目について AskUserQuestion（MTG）で確認。

```
QA 回答を分析
    ↓
未回答・不明項目を検出
    ↓
AskUserQuestion で確認
    「以下の項目について教えてください...」
```

---

## 2. AI SIer としての提案

### Q2.1: 提案はデータ項目だけ？

**A:** いいえ。システム開発のプロとして全ての観点から提案。

| 観点 | 提案例 |
|------|--------|
| 機能追加 | 「レポート機能も必要では？」 |
| 機能削除 | 「この機能は MVP では不要では？」 |
| データ追加 | 「更新日時も記録した方が良いのでは？」 |
| データ削除 | 「この項目は使われないのでは？」 |
| ビジネスロジック | 「この計算ロジックは正しいですか？」 |
| UX 改善 | 「エラー時のフィードバックはどうしますか？」 |
| セキュリティ | 「権限管理は必要ですか？」 |
| パフォーマンス | 「大量データ時の対策は？」 |
| 保守性 | 「ログ設計はどうしますか？」 |
| スケーラビリティ | 「将来の拡張を考慮すると...」 |

---

### Q2.2: 不要な項目の指摘はどうする？

**A:** QA ドキュメントの「確認事項」セクションで確認。

```markdown
### C3.1: 不要と思われる項目 [確認]

入力に含まれている以下の項目について、本当に必要か確認させてください：

| 項目 | AI の所見 | 必要？ |
|------|----------|--------|
| 製造ロット番号 | 在庫管理と連携しないなら不要では | [ ] 必要 / [ ] 不要 |
| 承認フラグ | 承認ワークフローがなければ不要では | [ ] 必要 / [ ] 不要 |
```

---

### Q2.3: 提案を全部断ったらどうなる？

**A:** ユーザーの判断を尊重。ただし確認は行う。

```
AI: 「承知しました。以下の構成で進めます：
     [ユーザーが選んだ内容]

     確認: この構成で Spec を作成してよいですか？
     ※ 後から機能を追加することも可能です」
```

---

## 3. ワークフローの混合・分岐

### Q3.1: Add 実行中に Change が必要になったら？

**A:** 規模で判定。

| 規模 | 対応 |
|------|------|
| 小規模（属性 1-2 個追加） | Cascade Update で同一 Issue 内処理 |
| 中規模以上 | 別 Issue として分離を提案 |

```
AI: 「この機能には M-CUSTOMER の変更が必要です。

     [推奨] 1つの Issue で対応（変更が小規模なため）
     [代替] 別 Issue に分離（変更履歴を明確にしたい場合）」
```

---

### Q3.2: Fix を実行中に Add が必要になったら？

**A:** バグ修正と機能追加は明確に分離。

```
AI: 「このバグは設計の根本的な問題に起因しています。

     [提案]
     - Issue #N (Fix): 現在の症状を一時的に回避
     - Issue #N+1 (Add): 根本的な機能改善」
```

---

## 4. Spec と Plan の作成判定

### Q4.1: Fix で必ず Spec と Plan を作る？

**A:** Complexity による。

| レベル | 条件 | QA | Fix Spec | Plan |
|--------|------|-----|----------|------|
| Trivial | 原因明確、1-2ファイル | 不要 | 簡易 or なし | 不要 |
| Standard | 調査必要、3+ファイル | 必要 | 必要 | 必要 |
| Complex | 設計問題、Spec変更必要 | 必要 | 必要 | 必要 |

---

### Q4.2: Change で必ず QA と Plan を作る？

**A:** 規模による。

| レベル | 条件 | QA | Plan |
|--------|------|-----|------|
| 小規模 | 単一 Spec の小変更 | 不要 | 不要 |
| 大規模 | 複数 Spec に影響 | 必要 | 必要 |

---

## 5. Quick の判定

### Q5.1: Quick の判定は自動？

**A:** 自動判定 + 境界ケースはユーザー確認。

```
チェック項目:
□ 新規 ID 不要
□ ビジネスロジック変更なし
□ Spec 定義への影響なし
□ 3 ファイル以下、20 行以下

すべて YES → Quick
いずれか NO → 非 Quick
境界ケース → ユーザーに確認
```

---

### Q5.2: Quick だと思ったら影響があった場合は？

**A:** Impact Guard が検出し、エスカレーション。

```
AI: 「この変更は SCR-LOGIN の Layout 定義に影響する可能性があります。

     [推奨] Change ワークフローで対応
     [代替] Quick で続行（Spec との乖離が発生）」
```

---

## 6. Issue との関係

### Q6.1: いつ Issue を作成する？

**A:** Spec を変更する作業の前。

| ワークフロー | Issue 必要 | タイミング |
|-------------|-----------|-----------|
| Project Setup | 後で作成 | Spec 生成後に Feature Issues 一括作成 |
| Add | 必要 | ワークフロー開始前 |
| Fix Standard/Complex | 必要 | ワークフロー開始前 |
| Fix Trivial | 推奨 | 任意 |
| Change 大規模 | 必要 | ワークフロー開始前 |
| Change 小規模 | 推奨 | 任意 |
| Quick | 不要 | - |

---

### Q6.2: Issue がない状態で依頼が来たら？

**A:** AI がデフォルトで Issue を自動作成。

```
AI: 「Issue #N を作成しました。

     タイトル: {機能名} の追加
     ラベル: feature（または fix/change）

     ※ Issue なしで進めたい場合はお知らせください」
```

**例外:**
- Quick Mode: Issue 作成不要（Spec 変更なし）
- ユーザーが明示的に「Issue なし」と指示した場合

---

## 7. ワークフロー開始点

### Q7.1: 通常のフローはどこから始まる？

**A:** 状況による。

```
【新規プロジェクト】
project-setup-input.md 記入 → project-setup ワークフロー

【既存プロジェクト（Issue あり）】
「Issue #N から開始して」→ issue ワークフロー → Add/Fix/Change

【既存プロジェクト（直接依頼）】
「〇〇機能を追加して」→ 自動判定 → Add/Fix/Change/Quick
```

---

### Q7.2: Project Setup の後は必ず Issue 経由？

**A:** 推奨だが強制ではない。

```
Project Setup 完了 → Feature Issues 作成

【推奨】 「Issue #N から開始して」
【代替】 「認証機能を追加して」
         → AI が Issue との紐付けを確認
```

---

## 8. QA ドキュメントの運用

### Q8.1: QA ドキュメントはどこに保存される？

**A:** `.specify/qa/` ディレクトリ。

```
.specify/qa/
├── project-setup-qa.md
├── feature-login-qa.md
├── feature-sales-qa.md
└── fix-123-qa.md
```

---

### Q8.2: QA ドキュメントは後から参照できる？

**A:** できる。Spec のソースとして保存される。

```
Spec 作成時に QA への参照を記録
    ↓
後から「なぜこの設計になったか」を追跡可能
```

---

## 9. Input ドキュメントのライフサイクル

### Q9.1: Input ドキュメントはどう管理される？

**A:** 3段階のライフサイクル。

```
1. ユーザーが記入
   .specify/input/add-input.md に機能概要を記入

2. Spec 作成時にコピー
   preserve-input.cjs add --feature {feature-id}
   → .specify/specs/features/{feature-id}/input.md にコピー

3. 自動リセット
   reset-input.cjs add
   → .specify/input/add-input.md をテンプレートに戻す
```

---

### Q9.2: なぜコピーを残す？

**A:** トレーサビリティのため。

- Spec の元になった入力を追跡可能
- 後から「なぜこの設計になったか」を確認できる
- QA ドキュメントと合わせて意思決定の履歴を保持

---

### Q9.3: リセットはいつ行われる？

**A:** ワークフロー完了時に自動実行。

| ワークフロー | リセット対象 | タイミング |
|-------------|-------------|-----------|
| project-setup | vision-input.md | Vision Spec 承認後 |
| add | add-input.md | Feature Spec 承認後 |
| fix | fix-input.md | Fix Spec 承認後 |

※ PR 作成前の最終ステップで実行される

---

## 設計原則まとめ

1. **ドキュメント + MTG**: QA ドキュメントでやり取り、必要な場合のみ対話
2. **プロとしての提案**: データだけでなく全ての観点から提案
3. **1 Issue = 1 目的**: 複合は規模で分離判定
4. **Complexity / 規模で判断**: QA・Plan の要否は規模次第
5. **ユーザー主権**: AI は提案、最終判断はユーザー
