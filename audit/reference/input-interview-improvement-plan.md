# Input / Interview 改善計画

**作成日:** 2026-01-01
**目的:** ユーザーが本当に必要としているシステムを AI が導きながら引き出す仕組みの構築
**スコープ:** Pre-Input テンプレート、AI-Guided Discovery、ワークフロー再構築

---

## Executive Summary

| 項目 | 内容 |
|------|------|
| 目標 | ユーザーの「知らない」を AI が引き出し、完全な Spec を作成 |
| 設計思想 | ユーザーは「書くのが面倒」ではなく「知らないことがある」 |
| 主な変更 | Pre-Input 再設計、AI-Guided Discovery 導入、Vision+Design 統合 |
| 影響範囲 | vision.md, design.md, add.md, fix.md, Input テンプレート全般 |

---

## 1. 現状分析

### 1.1 Input テンプレートの問題点

| テンプレート | Spec カバー率 | 問題点 |
|-------------|--------------|--------|
| vision-input.md | ~60% | Part B/C/D は Design フェーズの内容 |
| add-input.md | ~15% | Feature Spec の 16 セクション中 2-3 のみ |
| fix-input.md | ~20% | Root Cause 分析が不足 |

### 1.2 Interview の問題点

- Deep Interview は「網羅性」重視で、ユーザー体験が長い
- AI からの「提案」が少なく、ユーザーに発見を促せていない
- 機能提案がなく、ユーザーが気づいていない機能を引き出せない

### 1.3 ワークフローの問題点

- Vision と Design が分離しているが、Input では混在
- Vision Interview で「機能洗い出し」をするが、これは Design の領域
- ワークフロー遷移が不自然

---

## 2. 設計思想

### 2.1 根本的な考え方の転換

**従来の想定:**
> ユーザーは書くのを面倒くさがる → 入力を最小限に

**新しい設計思想:**
> ユーザーは「知らないことがある」 → AI が導いて引き出す

### 2.2 ユーザーの実態

| 知っていること | 例 |
|---------------|-----|
| やりたい機能のリスト | 売上登録、売上一覧、レポート |
| 扱うデータ項目 | 顧客、日付、商品、金額、納期 |
| 画面のイメージ | フォーム、テーブル、グラフ |
| ユーザー像 | 営業担当、経理、管理者 |

| 知らない/気づいていないこと | AI が引き出すべき |
|---------------------------|-----------------|
| エッジケース | 納期変更時、キャンセル時の処理 |
| 機能間の関係 | マスタ管理、参照関係 |
| 抜けている機能 | 権限管理、監査ログ、エクスポート |
| 技術的考慮 | 同時編集、パフォーマンス |

### 2.3 AI の役割

1. **確認・補完**: ユーザーの入力を深掘り
2. **機能提案**: ユーザーが気づいていない機能を提案
3. **関連付け**: 機能間の関係を整理
4. **エッジケース発見**: 例外処理、エラーケースの洗い出し
5. **優先順位付け**: MVP とフェーズ分けの支援

---

## 3. Pre-Input テンプレート再設計

### 3.1 設計原則

- **機能ベース**: ユーザーが「機能単位」で考えやすい構造
- **扱うデータ**: 各機能で扱うデータ項目を事前収集
- **マスタ分離**: 共通データを明示的に分離
- **必須は最小限**: 書けることだけ書く

### 3.2 Project Setup Input（Vision + Design 統合用）

```markdown
# Project Setup Input

## 1. プロジェクト概要

### 基本情報（必須）
- **プロジェクト名**:
- **一言で何をするシステム？**:
- **誰が使う？**:

### 背景（あれば）
- **現状の課題**:
- **このシステムで解決したいこと**:

---

## 2. 機能リスト

欲しい機能を思いつくだけ書いてください。
詳細は後から AI が深掘りします。

### 機能 1
- **機能名**:
- **何をする？**:
- **扱うデータ**:
- **画面イメージ**:

### 機能 2
- **機能名**:
- **何をする？**:
- **扱うデータ**:
- **画面イメージ**:

### 機能 3
- **機能名**:
- **何をする？**:
- **扱うデータ**:
- **画面イメージ**:

（必要に応じて追加）

---

## 3. マスタ・共通データ（あれば）

システム全体で共有するデータがあれば記載：

- 例: 顧客マスタ（顧客名、住所、連絡先）
- 例: 商品マスタ（商品名、単価、カテゴリ）

---

## 4. その他（あれば）

- **やらないこと**:
- **参考サイト/既存システム**:
- **デザイン希望**:
- **制約・希望**:
```

### 3.3 Add Feature Input（機能追加用）

```markdown
# Add Feature Input

## 1. 機能概要

- **機能名**:
- **何をする機能？**:
- **なぜ必要？**:

---

## 2. 詳細

### 扱うデータ
-

### 画面イメージ
-

### 期待する動作
1.
2.
3.

---

## 3. 関連（あれば）

- **関連する既存機能**:
- **参照するマスタ**:
- **制約・希望**:
```

### 3.4 Fix Bug Input（バグ修正用）

```markdown
# Fix Bug Input

## 1. 問題の概要

- **何が起きている？**:
- **期待する動作**:
- **実際の動作**:

---

## 2. 再現手順

1.
2.
3.

---

## 3. 追加情報（あれば）

- **発生条件**:
- **エラーメッセージ**:
- **スクリーンショット**:
```

---

## 4. AI-Guided Discovery

### 4.1 概要

Pre-Input を読み込んだ後、AI が対話形式で不足情報を引き出す。

```
Pre-Input（ユーザーが書く）
    ↓
    ┌─────────────────────────────────────────┐
    │ AI-Guided Discovery                     │
    │                                         │
    │ Phase 1: Seeding（確認・補完）           │
    │   - 入力内容の確認                      │
    │   - 不明点の特定                        │
    │                                         │
    │ Phase 2: Expanding（深掘り）             │
    │   - 各機能の詳細を深掘り                │
    │   - エッジケースの発見                  │
    │                                         │
    │ Phase 3: Proposing（機能提案）           │
    │   - 不足している機能を AI が提案        │
    │   - 「こんな機能も必要では？」          │
    │                                         │
    │ Phase 4: Connecting（関連付け）          │
    │   - 機能間の関係を整理                  │
    │   - 画面遷移、データフローの確認        │
    │                                         │
    │ Phase 5: Confirming（優先順位）          │
    │   - MVP 範囲の決定                      │
    │   - フェーズ分けの確認                  │
    └─────────────────────────────────────────┘
    ↓
Spec 生成
```

### 4.2 提案ベースの質問

**従来:**
```
「認証機能はどのように実装しますか？」
```

**新しいアプローチ:**
```
AskUserQuestion:
  questions:
    - question: "認証機能について、以下のどれが近いですか？"
      header: "認証方式"
      options:
        - label: "メール/パスワード認証"
          description: "[推奨] 一般的な方式、実装がシンプル"
        - label: "ソーシャルログイン"
          description: "Google/GitHub 等、ユーザー登録が楽"
        - label: "SSO/SAML"
          description: "企業向け、既存認証基盤と連携"
        - label: "認証不要"
          description: "社内ツール等、認証なしでOK"
      multiSelect: false
```

### 4.3 機能提案の例

```
=== AI からの機能提案 ===

入力いただいた「売上管理システム」を分析しました。
以下の機能も必要ではないでしょうか？

[提案 1] 売上レポート
- 月次/年次の売上集計とグラフ表示
- 理由: 売上データを蓄積するなら分析機能も有用

[提案 2] 顧客別売上分析
- 顧客ごとの売上推移、ランキング
- 理由: 営業担当の KPI 管理に活用可能

[提案 3] 売上アラート
- 納期超過、目標未達時の通知
- 理由: 能動的な管理が可能に

[提案 4] データエクスポート
- CSV/Excel 出力機能
- 理由: 外部ツールでの分析、報告書作成に必要

上記の提案について、必要なものを選んでください。
```

### 4.4 終了条件

以下がすべて満たされたら終了：

1. 全機能の詳細が明確
2. マスタデータの定義が完了
3. 画面構成が確定
4. 機能間の関係が整理済み
5. MVP 範囲が決定
6. Critical な曖昧点がない

---

## 5. ワークフロー再構築

### 5.1 統合計画

| 現行 | 新規 | 変更内容 |
|------|------|---------|
| vision.md + design.md | project-setup.md | 統合、一貫したフロー |
| add.md | add.md | AI-Guided Discovery 導入 |
| fix.md | fix.md | AI-Guided Discovery 導入 |
| quick.md | quick.md | 維持（Spec 管理外） |

### 5.2 Project Setup ワークフロー（新規）

```
Pre-Input 読み込み
    ↓
AI-Guided Discovery（5フェーズ）
    ↓
Vision Spec 生成（Why・Who）
    ↓
Screen Spec 生成（UI の What）
    ↓
Domain Spec 生成（ロジックの What）
    ↓
Cross-Reference Matrix 生成
    ↓
Multi-Review（3観点）
    ↓
CLARIFY GATE
    ↓
[HUMAN_CHECKPOINT]
    ↓
Feature Issue 作成（GitHub）
```

### 5.3 Spec ドキュメント構造（分離維持）

```
.specify/specs/
├── overview/
│   ├── vision/spec.md      # プロジェクトの Why・Who
│   ├── screen/spec.md      # 画面定義（UI の What）
│   └── domain/spec.md      # ドメイン定義（ロジックの What）
└── features/
    └── {feature-id}/spec.md  # 個別機能（How）
```

**理由:**
- コンテキスト管理（必要な Spec のみ読込可能）
- 再利用性（Screen/Domain は複数 Feature で共有）
- 変更影響の限定

---

## 6. Quick Change の取り扱い

### 6.1 Quick の位置づけ

**Quick = Spec 管理外の軽微変更**

| 条件 | Quick | Project Setup / Add |
|------|-------|---------------------|
| 新規プロジェクト | x | Project Setup |
| 新機能追加 | x | Add |
| 色・テキスト変更のみ | o | x |
| ≤3 ファイル、≤20 行 | o | x |
| 新規 ID 不要 | o | x |
| ビジネスロジック変更なし | o | x |
| Spec への影響なし | o | x |

### 6.2 Quick のフロー

```
Quick 判定
    ↓
Impact Guard（Spec 影響確認）
    ↓
影響なし → 実装 → Changelog 更新
    ↓
影響あり → Add/Fix ワークフローへ誘導
```

### 6.3 Quick の Input

Quick は Pre-Input 不要。会話で直接指示：

```
「ボタンの色を青から緑に変えて」
「ヘッダーのテキストを修正して」
「設定のデフォルト値を変更して」
```

---

## 7. Spec レベルの整理

### 7.1 レベル定義

| レベル | 説明 | 用途 |
|--------|------|------|
| ~~Essential~~ | ~~廃止~~ | - |
| **Standard** | 通常の Spec | すべてのプロジェクト（デフォルト） |
| Extended | 詳細な Spec | 大規模・複雑なプロジェクト |

### 7.2 Standard がデフォルトの理由

- 小規模でも Spec の価値は変わらない
- 曖昧さを排除し、後のトラブルを防ぐ
- Essential を廃止することで選択の複雑さを排除
- Quick が「Spec 不要」の受け皿

### 7.3 判定フロー

```
変更要求
    ↓
Quick 条件を満たす？
    ├─ YES → Quick（Spec 不要）
    └─ NO → Standard Spec を作成
```

---

## 8. 実装計画

### Phase 1: テンプレート更新

| 対象 | 作業内容 |
|------|---------|
| `.specify/input/project-setup-input.md` | 新規作成（Vision + Design 統合用） |
| `.specify/input/add-input.md` | 機能ベースに再設計 |
| `.specify/input/fix-input.md` | 簡素化 |
| `.specify/input/vision-input.md` | 削除（project-setup に統合） |

### Phase 2: ワークフロー更新

| 対象 | 作業内容 |
|------|---------|
| `workflows/project-setup.md` | 新規作成 |
| `workflows/vision.md` | 削除または project-setup へリダイレクト |
| `workflows/design.md` | 削除または project-setup へリダイレクト |
| `workflows/add.md` | AI-Guided Discovery 導入 |
| `workflows/fix.md` | AI-Guided Discovery 導入 |

### Phase 3: 共通コンポーネント更新

| 対象 | 作業内容 |
|------|---------|
| `shared/_guided-discovery.md` | 新規作成（5フェーズ定義） |
| `shared/_vision-interview.md` | 削除または統合 |
| `shared/_deep-interview.md` | _guided-discovery.md に統合 |

### Phase 4: ドキュメント更新

| 対象 | 作業内容 |
|------|---------|
| `CLAUDE.md` | ワークフロールーティング更新 |
| `SKILL.md` | スキル定義更新 |
| `docs/` | ワークフローリファレンス更新 |

---

## 9. 移行戦略

### 9.1 後方互換性

**完全置き換え（後方互換性なし）**

理由：
- 設計思想が根本的に異なる
- 中途半端な互換性は混乱を招く
- 新規プロジェクト向けテンプレートのため影響は限定的

### 9.2 既存プロジェクトへの対応

既存プロジェクト（既に Vision Spec がある場合）：
- そのまま現行フローを継続
- 新機能追加時は新しい add.md を使用

新規プロジェクト：
- project-setup.md から開始

---

## 10. 期待効果

| 観点 | Before | After |
|------|--------|-------|
| Input カバー率 | 15-60% | 70-80%（機能ベースで書きやすい） |
| 抜け漏れ発見 | ユーザー依存 | AI が提案・発見 |
| ワークフロー | Vision → Design 分離 | Project Setup 統合 |
| Spec レベル判断 | Essential/Standard 選択 | Standard 一択（Quick が受け皿） |
| ユーザー体験 | 長い Interview | 提案ベースの対話 |

---

## Appendix: 用語定義

| 用語 | 定義 |
|------|------|
| Pre-Input | ワークフロー開始前にユーザーが記入する入力フォーム |
| AI-Guided Discovery | AI が対話形式で不足情報を引き出すプロセス |
| Feature Hints | Vision Spec に記載する機能候補リスト |
| Quick Change | Spec 管理外の軽微変更 |
| Impact Guard | Quick 変更時の Spec 影響確認プロセス |
| Standard Spec | 通常の詳細度を持つ仕様書（デフォルト） |
